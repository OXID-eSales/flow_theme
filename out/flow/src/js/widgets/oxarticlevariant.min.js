!function(a){function b(b){var c=a(this);if(c.parents().hasClass("js-disabled")?d():a("form.js-oxProductForm input[name=anid]").attr("value",a("form.js-oxProductForm input[name=parentid]").attr("value")),c.parents(".js-fnSubmit").length>0){a("input:hidden",c.parents("div.dropDown")).val(c.data("selection-id"));var e=a("form.js-oxWidgetReload");a("input[name=fnc]",e).val(""),e.submit()}return!1}function c(b){d();var c=a("form.js-oxWidgetReload");return a("input[name=fnc]",c).val(""),c.submit(),!1}function d(){for(var b=a("form.js-oxProductForm input[name^=varselid], form.js-oxWidgetReload input[name^=varselid]"),c=0;c<b.length;c++)a(b[c]).attr("value","");a("form.js-oxProductForm input[name=anid]").attr("value",a("form.js-oxProductForm input[name=parentid]").attr("value"))}function e(){var b={},c=a(this);if(!a("input[name='fnc']",this).val()){if(a("input[name=aid]",this).val()==a("input[name=parentid]",this).val()){var d=a("input[name^=varselid]",a("form.js-oxProductForm"));if(d.length){var e="";if(d.each(function(c){e=e+c+":"+a(this).val()+"|",b[a(this).attr("name")]=a(this).val()}),-1===jQuery.inArray(e,oxVariantSelections))return g.reload(a(c),a("#details_container"),a("#details_container")[0],b)}}return g.reload(a(c),a("#details_container"),a("#details_container")[0],b)}}function f(){a("#zoomModal").remove()}var g={_create:function(){a("ul.vardrop a").click(b),a("div.variantReset a").click(c),a("form.js-oxWidgetReload").submit(e),a("form.js-oxProductForm").submit(e)},reload:function(b,c,d,e){return f(),oxAjax.ajax(b,{targetEl:c,iconPosEl:a("#variants .dropDown"),additionalData:e,onSuccess:function(b){a(d).parent().html(b),"undefined"!=typeof WidgetsHandler&&(WidgetsHandler.reloadWidget("oxwarticledetails"),WidgetsHandler.reloadWidget("oxwrating"),WidgetsHandler.reloadWidget("oxwreview"))}}),!1},resetVariantSelections:function(){d()}};a.widget("ui.oxArticleVariant",g)}(jQuery);